<!DOCTYPE html>
<html>
  <head>
    <title>Twittler</title>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>

  <body>
    <script>
      $(document).ready(function(){
        // jQuery Body Selector
        var $body = $('body');
        $body.html('');
        $body.css({
          'background-color': '#c0deed',
          'font-family': 'Helvetica Neue',
          'text-align': 'center'
        });
        $($body).on('click', 'a', displayUserFeed);

        // Title Module
        var $title = $('<h1><a href="#">Twittler</a></h1>');
        $title.appendTo($body);
        $('a').css({
          'background-color': '#c0deed',
          'color': '#ffffff',
          'font-size': '60px',
          'font-weight': 'bold',
          'text-align': 'center',
          'text-decoration': 'none'
        });
        // Refresh page when title is clicked
        $title.click(updateFeed);

        // Refresh Feed Button
        var $button = $('<button>Update Feed</button>');
        $button.appendTo($body);
        $button.css({
          'background-color': '#00aced',
          'border': '0px',
          'border-radius': '20px',
          'color': '#ffffff',
          'font-size': '16px',
          'font-weight': 'bold',
          'padding': '8px 18px',
        });
        // Refresh Feed when button is clicked
        $button.click(updateFeed);

        // Twitter Feed Module
        var $feed = $('<div></div>');
        $feed.appendTo($body);
        updateFeed();

        // Twittler Feed
        function updateFeed(){
          var index = streams.home.length - 1;
          // Clear the existing Twittler Feed
          $feed.empty();
          while(index >= 0){
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');
            $tweet.html('<div class="username">' + '@' + tweet.user + '</div>' + '<div class="message">' + tweet.message + '</div> <div class="datetime">' + tweet.created_at.toLocaleDateString() + ' ' + tweet.created_at.toLocaleTimeString()+ '</div>');
            $tweet.appendTo($feed);
            $tweet.css({
              'background-color': '#ffffff',
              'border-radius': '20px',
              'color': 'black',
              'font-size': "16px",
              'text-align': 'left',
              'height': '150px',
              'width': '460px',
              'margin': 'auto',
              'margin-bottom': '20px',
              'positon': 'center',
            });
            // Username Styling
            $('.username').css({
              'font-size': '18px',
              'font-weight': "bold",
              'padding-top': '12px',
              'margin-top': '10px',
              'margin-left': '20px'
            });
            // Tweet Styling
            $('.message').css({
              'font-size': "16px",
              'padding-top': '12px',
              'margin-top': '20px',
              'margin-left': '20px'

            });
            // Date and Time Styling
            $('.datetime').css({
              'font-size': "12px",
              'color': '#666666',
              'padding-top': '12px',
              'margin-top': '20px',
              'margin-left': '20px'
            });
            index -= 1;
          }
        }

        // View Individual user's Tweets
        function displayUserFeed() {
          var user = $(this).attr('#username');
          var index = streams.users[user].length - 1;
          // Clears the existing Twittler Feed
          $feed.empty();
          while(index >= 0){
            var tweet = streams.users[user][index];
            var $tweet = $('<div></div>');
            $tweet.html('<a href=# id="username"'+user+'>@'+user+'</a> (' + tweet.created_at.toLocaleDateString() + ' at ' + tweet.created_at.toLocaleTimeString() + '): ' + tweet.message);
            $tweet.appendTo($feed);
            $tweet.css({
              'background-color': '#ffffff',
              'border-radius': '20px',
              'color': 'black',
              'font-size': "16px",
              'text-align': 'left',
              'height': '150px',
              'width': '450px',
              'margin': 'auto',
              'margin-bottom': '20px',
              'positon': 'center',
            });
            // Username Styling
            $('#username').css({
              'font-size': '18px',
              'font-weight': "bold",
              'padding-top': '12px',
              'margin-top': '10px',
              'margin-left': '20px'
            });
            // Tweet Styling
            $('#message').css({
              'font-size': "16px",
              'padding-top': '12px',
              'margin-top': '20px',
              'margin-left': '20px'

            });
            // Date and Time Styling
            $('#datetime').css({
              'font-size': "12px",
              'color': '#666666',
              'padding-top': '12px',
              'margin-top': '20px',
              'margin-left': '20px'
            });
            index -= 1;
          }
        }
      });
    </script>
  </body>
</html>
